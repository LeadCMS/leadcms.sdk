# LeadCMS SDK v3.0.0 - Major Release: Environment-Based Draft Handling

We're excited to announce **LeadCMS SDK v3.0.0**, a major release that introduces **environment-based draft handling**, enhanced security, and a cleaner API surface. This release removes deprecated functionality and establishes a more intuitive development experience.

## üö® Breaking Changes

### ‚ö†Ô∏è Removed Deprecated Functions

All backward compatibility functions with `includeDrafts` boolean parameters have been removed:

**Removed Functions:**
- `getCMSContentBySlugForLocaleWithDraftSupport()`
- All function overloads with `includeDrafts` boolean parameters

**Migration Required:**
```typescript
// ‚ùå v2.x (deprecated, removed in v3.0)
const content = getCMSContentBySlugForLocaleWithDraftSupport(
  'my-article', 
  'en', 
  userUid, 
  true // includeDrafts boolean - REMOVED
);

// ‚úÖ v3.0+ (environment-based)
const content = getCMSContentBySlugForLocale(
  'my-article', 
  'en', 
  userUid // Only userUid parameter needed
);
```

### üîÑ Environment-Based Draft Detection

Draft handling is now **automatically determined by your environment** - no more manual boolean flags!

**New Behavior:**
- **Development Mode** (`NODE_ENV=development`): Drafts included by default
- **Production Mode** (`NODE_ENV=production`): Only published content
- **Test Mode** (`NODE_ENV=test`): Only published content
- **Override**: Set `LEADCMS_PREVIEW=false` to force disable drafts

## üåü What's New

### üéØ Simplified API Surface

The API is now cleaner and more intuitive with consistent function signatures:

```typescript
// All functions now use the same pattern
getAllContentSlugsForLocale(locale?, contentTypes?, userUid?)
getCMSContentBySlugForLocale(slug, locale?, userUid?)
getAllContentRoutes(contentTypes?, userUid?)
getContentTranslations(translationKey, userUid?)
```

**Benefits:**
- ‚úÖ No more confusing boolean parameters
- ‚úÖ Consistent function signatures across the API
- ‚úÖ Environment automatically determines behavior
- ‚úÖ Cleaner code with better readability

### üåç Environment Configuration

Configure draft behavior through environment variables:

```bash
# Development mode - includes drafts by default
NODE_ENV=development

# Production mode - only published content  
NODE_ENV=production

# Force disable drafts (overrides NODE_ENV)
LEADCMS_PREVIEW=false

# Force enable drafts (overrides NODE_ENV)
LEADCMS_PREVIEW=true
```

**Priority Order:**
1. `LEADCMS_PREVIEW` environment variable (highest priority)
2. Global configuration override 
3. `NODE_ENV` detection (default behavior)

**Use Cases:**
- **Next.js Preview Mode**: Automatically detect and show draft content
- **Development vs Production**: Different behavior based on environment
- **Preview URLs**: Enable drafts for specific user sessions
- **Content Management**: Show/hide draft indicators in UI

---

## üéâ Thank You!

LeadCMS SDK v3.0.0 represents a major step forward in content management developer experience. The environment-based draft handling, enhanced security, and cleaner API surface provide a solid foundation for building modern, secure content-driven applications.

**Special thanks to all contributors and community members who helped shape this release!**

### Breaking Changes Summary

‚ö†Ô∏è **Action Required**: Update function calls and configure environment variables  
üéØ **API Simplified**: Consistent function signatures across all methods  
üåç **Environment-Based**: Automatic draft detection based on NODE_ENV  

---

**Happy coding with LeadCMS SDK v3.0.0! üöÄ**

*For questions, issues, or feedback, visit our [GitHub repository](https://github.com/LeadCMS/leadcms.sdk).*
